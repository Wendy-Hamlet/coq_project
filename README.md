# 带类型 WhileD 语言的词法分析、语法分析和类型分析

带类型 WhileD 语言的语法应当包含所有 WhileD 语言的语法、带类型的变量声明、以及类型转化。

- 变量声明的语法是：`type_name var_name; command`
- 类型转换的语法是：`(type_name) expression`

应当支持的类型有：`short`、`int`、`long`、`long long`、它们的指针类型，包括指针的指针、指针的指针的指针...

## 任务要求

在这个任务中，你需要：

- 设计带类型 WhileD 语言的 C 语言实现
- 实现该程序语言的词法分析和语法分析
- 检查每个变量是否都先声明后使用
- 在上述程序语言抽象语法树的基础上，设计带隐式类型转换的抽象语法树
- 分析原先程序语法树，进行类型检查并添加必要的隐式类型转换

具体在实现的过程中，含隐式类型转换的语法树和不含隐式类型转换的语法树，可以选用相同或者不同的 C 语言存储结构。

## 隐式类型转换规则

在最终的提交文档中，应当包含添加隐式类型转换规则，规则的制定应当具有合理性，可以参考 C 标准（不一定要完全相同），例如：

- `int` 类型的 `a` 与 `long` 类型的 `b` 相加要先将 `a` 转化为 `long` 类型
- 常量的取值如果不超出 `int` 的范围则其类型默认为 `int`
- 等等

## 类型检查规则

在最终的提交文档中，还应当包含类型检查规则，例如：

- 指针类型不能参与乘法运算
- 指针与指针不能相加
- 取地址操作只能用于左值表达式
- 非指针类型不能解引用
- 等等